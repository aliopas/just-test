# Ø­Ù„ Ù…Ø´Ø§ÙƒÙ„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø¹ Supabase

**Ø§Ù„ØªØ§Ø±ÙŠØ®:** 2025-01-16

---

## ğŸ” Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©

Ø¹Ù†Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ ÙŠØ¸Ù‡Ø± Ø§Ù„Ø®Ø·Ø£:
```
POST https://wtvvzthfpusnqztltkkv.supabase.co/auth/v1/token?grant_type=password 400 (Bad Request)
[Login] Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: {code: '400', message: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.'}
```

---

## âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ÙˆÙ† ÙÙŠ Supabase Auth:

| Email | Role | Status | Email Confirmed | User ID |
|-------|------|--------|-----------------|---------|
| `oooomar896@gmail.com` | admin | active | âœ… | `3dc0314b-edfe-4e52-ac96-741867e278a3` |
| `oooomar11223300@gmail.com` | admin | active | âœ… | `ea1852c3-be02-4b67-bcfb-a97ef5c18074` |
| `bacuratec2030@gmail.com` | investor | active | âœ… | `0847da8d-3160-41f9-9954-af139b8fcfc3` |

**Ø§Ù„Ø®Ù„Ø§ØµØ©:** Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…ÙˆØ¬ÙˆØ¯ÙˆÙ† ÙˆÙ…Ø¤ÙƒØ¯ÙˆÙ† ÙÙŠ Supabase Auth.

---

## ğŸ” Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù…ÙƒÙ†Ø©

### 1. Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (Ø§Ù„Ø£ÙØ¶Ù„)

Ø¥Ø°Ø§ ÙƒÙ†Øª Ù„Ø§ ØªØ¹Ø±Ù ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ØµØ­ÙŠØ­Ø©:

#### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 1: Ø§Ø³ØªØ®Ø¯Ø§Ù… Supabase Dashboard
1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ [Supabase Dashboard](https://supabase.com/dashboard)
2. Ø§Ø®ØªØ± Ù…Ø´Ø±ÙˆØ¹Ùƒ
3. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ **Authentication** > **Users**
4. Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
5. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ **Edit** (Ø£Ùˆ Ø§Ù„Ø«Ù„Ø§Ø« Ù†Ù‚Ø§Ø·)
6. Ø§Ø®ØªØ± **Reset Password**
7. Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¥Ù„Ù‰ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ

#### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 2: Ø§Ø³ØªØ®Ø¯Ø§Ù… Script Ø§Ù„Ù…Ø¯Ù…Ø¬ (Ø§Ù„Ø£Ø³Ù‡Ù„) â­
```bash
# Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
npm run reset-password -- --email bacuratec2030@gmail.com --password NewPassword123!
```

**Ù…Ø«Ø§Ù„:**
```bash
# Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… bacuratec2030@gmail.com
npm run reset-password -- --email bacuratec2030@gmail.com --password MyNewPassword123!

# Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… oooomar896@gmail.com (admin)
npm run reset-password -- --email oooomar896@gmail.com --password AdminPassword123!
```

#### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 3: Ø§Ø³ØªØ®Ø¯Ø§Ù… Supabase Admin API Ù…Ø¨Ø§Ø´Ø±Ø©
```typescript
// ÙÙŠ backend script
import { createClient } from '@supabase/supabase-js';

const supabaseAdmin = createClient(
  process.env.SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
);

// Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
await supabaseAdmin.auth.admin.updateUserById(
  '0847da8d-3160-41f9-9954-af139b8fcfc3', // User ID
  { password: 'NewPassword123!' }
);
```

#### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 3: Ø§Ø³ØªØ®Ø¯Ø§Ù… Backend API
```bash
# Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ endpoint Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
POST /api/v1/auth/reset-password-request
{
  "email": "bacuratec2030@gmail.com"
}
```

### 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©

Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ¹ØªÙ‚Ø¯ Ø£Ù†Ùƒ ØªØ¹Ø±Ù ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:

1. **ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø§ÙØ§Øª** ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø£Ùˆ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
2. **ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ© Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø­Ø±Ù** (Case Sensitive)
3. **Ø¬Ø±Ø¨ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©:**
   - `000000` (Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ù† seed script)
   - `Admin@123` (Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ù† admin-login-testing.md)
   - ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø£ØµÙ„ÙŠØ© Ø§Ù„ØªÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù‡Ø§

### 3. Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯

Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ø¨Ø­Ø§Ø¬Ø© Ù„Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù‚Ø¯ÙŠÙ…:

```typescript
// Ø§Ø³ØªØ®Ø¯Ø§Ù… seed script
cd backend
npm run seed:users
```

Ù‡Ø°Ø§ Ø³ÙŠÙ†Ø´Ø¦:
- `oooomar896@gmail.com` / `000000` (admin)
- `oooomar124466@gmail.com` / `000000` (investor)

---

## ğŸ› ï¸ Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ÙÙˆØ±Ø§Ù‹

### Ø§Ù„Ø­Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹: Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…

```sql
-- ÙÙŠ Supabase SQL Editor
-- Ø§Ø³ØªØ¨Ø¯Ù„ USER_ID Ùˆ NEW_PASSWORD Ø¨Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØµØ­ÙŠØ­Ø©

-- Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… bacuratec2030@gmail.com
-- User ID: 0847da8d-3160-41f9-9954-af139b8fcfc3
```

Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Supabase Admin API:

```typescript
// ÙÙŠ backend/scripts/reset-password.ts
import { createClient } from '@supabase/supabase-js';
import * as dotenv from 'dotenv';

dotenv.config();

const supabaseAdmin = createClient(
  process.env.SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
);

async function resetPassword() {
  const userId = '0847da8d-3160-41f9-9954-af139b8fcfc3'; // bacuratec2030@gmail.com
  const newPassword = 'NewPassword123!';
  
  const { data, error } = await supabaseAdmin.auth.admin.updateUserById(userId, {
    password: newPassword,
  });
  
  if (error) {
    console.error('Error:', error);
  } else {
    console.log('Password reset successfully!');
    console.log('New password:', newPassword);
  }
}

resetPassword();
```

---

## ğŸ“ Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ­Ù‚Ù‚

### 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Supabase Auth
```sql
SELECT id, email, email_confirmed_at, created_at 
FROM auth.users 
WHERE email = 'bacuratec2030@gmail.com';
```

### 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø¬Ø¯ÙˆÙ„ users
```sql
SELECT id, email, role, status 
FROM users 
WHERE email = 'bacuratec2030@gmail.com';
```

### 3. Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
- Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
- ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Console

---

## ğŸ”’ Ø­Ø³Ø§Ø¨Ø§Øª Admin Ø§Ù„Ù…ØªØ§Ø­Ø©

### Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø¤ÙƒØ¯Ø© ÙˆØ§Ù„Ø¹Ø§Ù…Ù„Ø©:

1. **Email:** `oooomar896@gmail.com`
   - **Password:** `000000` (Ù…Ù† seed script)
   - **Role:** `admin`
   - **Status:** `active`
   - **Email Confirmed:** âœ…

2. **Email:** `oooomar11223300@gmail.com`
   - **Password:** `Admin@123` (Ù…Ù† admin-login-testing.md)
   - **Role:** `admin`
   - **Status:** `active`
   - **Email Confirmed:** âœ…

3. **Email:** `bacuratec2030@gmail.com`
   - **Password:** ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ (ÙŠØ­ØªØ§Ø¬ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†)
   - **Role:** `investor`
   - **Status:** `active`
   - **Email Confirmed:** âœ…

---

## ğŸš¨ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©

1. **ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ø­Ø³Ø§Ø³Ø© Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø­Ø±Ù** - ØªØ£ÙƒØ¯ Ù…Ù† ÙƒØªØ§Ø¨ØªÙ‡Ø§ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
2. **Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø³Ø§ÙØ§Øª** - ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø§ÙØ§Øª ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø£Ùˆ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
3. **Email Confirmed** - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø¤ÙƒØ¯ÙˆÙ†ØŒ Ù„Ø°Ø§ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ù„ÙŠØ³Øª Ù‡Ù†Ø§
4. **RLS Policies** - Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† RLS policies Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹ Ù„ÙƒÙ† Ù„Ø§ ÙŠØ³ØªØ·ÙŠØ¹ Ø§Ù„ÙˆØµÙˆÙ„

---

## ğŸ“š Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹

- [Supabase Auth Documentation](https://supabase.com/docs/guides/auth)
- [Supabase Admin API](https://supabase.com/docs/reference/javascript/auth-admin-updateuserbyid)
- [Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Login](./SUPABASE_AUTH_IMPLEMENTATION.md)

---

## âœ… Ø§Ù„Ø®Ù„Ø§ØµØ©

Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: **ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©**

Ø§Ù„Ø­Ù„: **Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±** Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø­Ø¯ Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø© Ø£Ø¹Ù„Ø§Ù‡

Ø§Ù„Ø¨Ø¯ÙŠÙ„: **Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø­Ø³Ø§Ø¨ admin Ù…ÙˆØ¬ÙˆØ¯** (`oooomar896@gmail.com` / `000000`)

