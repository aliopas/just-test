# ุญู ูุดููุฉ ุงูุชูุงุก ุตูุงุญูุฉ ุฑุงุจุท ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
# Fix for Expired Password Reset Link

## ุงููุดููุฉ
## Problem

ุนูุฏ ุงูุฏุฎูู ุนูู ุฑุงุจุท ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ ุงูููุชูู ุงูุตูุงุญูุฉุ ูุธูุฑ ุงูุฎุทุฃ:
```
error=access_denied&error_code=otp_expired&error_description=Email+link+is+invalid+or+has+expired
```

**ุงูุฑุงุจุท:** `https://investor-bacura.netlify.app/reset-password#error=access_denied&error_code=otp_expired&error_description=Email+link+is+invalid+or+has+expired`

---

## โ ุงูุญู ุงููุทุจู
## Applied Solution

ุชู ุชุญุณูู ุตูุญุฉ `ResetPasswordPage.tsx` ูู:

1. **ูุฑุงุกุฉ ุฃุฎุทุงุก Supabase ูู URL hash:**
   - ูุชุญูู ูู `error` ู `error_code` ูู URL hash
   - ูุชุนุฑู ุนูู `otp_expired` ูุฎุทุฃ ููุชูู ุงูุตูุงุญูุฉ

2. **ุนุฑุถ ุฑุณุงูุฉ ูุงุถุญุฉ ูููุณุชุฎุฏู:**
   - ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
   - ุฒุฑ ููุนูุฏุฉ ุฅูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
   - ูุต ุชูุถูุญู ูุดุฑุญ ููููุฉ ุทูุจ ุฑุงุจุท ุฌุฏูุฏ

3. **ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:**
   - ูุงุฌูุฉ ูุณุชุฎุฏู ุฃูุถู ุนูุฏ ุงูุชูุงุก ุงูุตูุงุญูุฉ
   - ุฅุฑุดุงุฏุงุช ูุงุถุญุฉ ูููุณุชุฎุฏู

---

## ๐ ููู ูุนูู ุงูุญู
## How the Solution Works

### ุนูุฏ ูุชุญ ุฑุงุจุท ููุชูู ุงูุตูุงุญูุฉ:

1. **ุงูููุฏ ููุฑุฃ URL hash:**
   ```javascript
   const hashParams = new URLSearchParams(window.location.hash.substring(1));
   const error = hashParams.get('error');
   const errorCode = hashParams.get('error_code');
   ```

2. **ูุชุญูู ูู ุงูุฎุทุฃ:**
   - ุฅุฐุง ูุงู `error_code === 'otp_expired'` ุฃู ููุฌุฏ `error`
   - ูุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ
   - ูููุน ูุญุงููุฉ ุงูุชุญูู ูู ุงูุฑุงุจุท

3. **ูุนุฑุถ ูุงุฌูุฉ ูุณุชุฎุฏู ููุงุณุจุฉ:**
   - ุฑุณุงูุฉ: "ุงูุฑุงุจุท ุบูุฑ ุตุงูุญ ุฃู ููุชูู ุงูุตูุงุญูุฉ"
   - ุฒุฑ: "ุงูุนูุฏุฉ ูุชุณุฌูู ุงูุฏุฎูู"
   - ูุต: "ููููู ุทูุจ ุฑุงุจุท ุงุณุชุนุงุฏุฉ ุฌุฏูุฏ ูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู"

---

## ๐ ูุฏุฉ ุตูุงุญูุฉ ุงูุฑุงุจุท
## Link Expiration

- **ุงูุงูุชุฑุงุถู:** ุฑุงุจุท ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ ุตุงูุญ ููุฏุฉ **1 ุณุงุนุฉ**
- **ูููู ุชุบููุฑู:** ูู Supabase Dashboard โ Authentication โ Settings

---

## ๐ง ุชุบููุฑ ูุฏุฉ ุงูุตูุงุญูุฉ (ุงุฎุชูุงุฑู)
## Change Expiration Duration (Optional)

### ูู Supabase Dashboard:

1. ุงุฐูุจ ุฅูู: **Authentication** โ **Settings**
2. ุงุจุญุซ ุนู: **Email Auth** โ **Password Reset**
3. ุบููุฑ: **Token expiry** (ูุฏุฉ ุตูุงุญูุฉ ุงูุฑูุฒ)
4. ุงุญูุธ ุงูุชุบููุฑุงุช

**ููุงุญุธุฉ:** ูููุตุญ ุจุชุฑููุง ุนูู ุณุงุนุฉ ูุงุญุฏุฉ ูุฃุณุจุงุจ ุฃูููุฉ.

---

## โ ุงูุชุญูู ูู ุงูุญู
## Verify the Solution

### ุจุนุฏ ุงูุชุญุฏูุซ:

1. **ุงูุชุญ ุฑุงุจุท ููุชูู ุงูุตูุงุญูุฉ:**
   - ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ/ุงูุฅูุฌููุฒูุฉ
   - ูุฌุจ ุฃู ุชุฑู ุฒุฑ "ุงูุนูุฏุฉ ูุชุณุฌูู ุงูุฏุฎูู"

2. **ุงููุฑ ุนูู ุงูุฒุฑ:**
   - ูุฌุจ ุฃู ูุชู ุชูุฌููู ุฅูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
   - ููููู ุทูุจ ุฑุงุจุท ุฌุฏูุฏ ูู ููุงู

---

## ๐ฏ ุชุญุณููุงุช ุฅุถุงููุฉ
## Additional Improvements

### 1. ุฑุณุงุฆู ุงูุฎุทุฃ ุงููุญุณููุฉ

- โ ุฑุณุงูุฉ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- โ ุดุฑุญ ููููุฉ ุงูุญุตูู ุนูู ุฑุงุจุท ุฌุฏูุฏ
- โ ุฒุฑ ููุนูุฏุฉ ุฅูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

### 2. ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู

- โ ูุงุฌูุฉ ูุณุชุฎุฏู ูุงุถุญุฉ ูููุธูุฉ
- โ ุฃููุงู ููุงุณุจุฉ ููุฑุณุงุฆู
- โ ุชูุงุนู ุณูุณ ูุน ุงูุฃุฒุฑุงุฑ

---

## ๐ ููุงุญุธุงุช ูููุฉ
## Important Notes

1. **ูุฏุฉ ุงูุตูุงุญูุฉ:**
   - ุงูุฑุงุจุท ุตุงูุญ ููุฏุฉ ุณุงุนุฉ ูุงุญุฏุฉ ุงูุชุฑุงุถูุงู
   - ุจุนุฏ ุงูุชูุงุก ุงูุตูุงุญูุฉุ ูุฌุจ ุทูุจ ุฑุงุจุท ุฌุฏูุฏ

2. **ุงูุฃูุงู:**
   - ุงูุชูุงุก ุงูุตูุงุญูุฉ ุจุนุฏ ุณุงุนุฉ ูู ุฅุฌุฑุงุก ุฃููู
   - ูููุน ุงุณุชุฎุฏุงู ุงูุฑูุงุจุท ุงููุฏููุฉ

3. **ุทูุจ ุฑุงุจุท ุฌุฏูุฏ:**
   - ูููู ุทูุจ ุฑุงุจุท ุฌุฏูุฏ ูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
   - ุงููุฑ ุนูู "ูุณูุช ูููุฉ ุงููุฑูุฑุ"

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก
## Troubleshooting

### ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

1. **ุชุญูู ูู ุงูุฑุงุจุท:**
   - ุชุฃูุฏ ูู ุฃู ุงูุฑุงุจุท ูู ููุณุชุฎุฏู ูุณุจูุงู
   - ุชุฃูุฏ ูู ุฃู ุงูุฑุงุจุท ูู ููุชูู ุตูุงุญูุชู

2. **ุงุทูุจ ุฑุงุจุท ุฌุฏูุฏ:**
   - ุงุฐูุจ ุฅูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
   - ุงููุฑ ุนูู "ูุณูุช ูููุฉ ุงููุฑูุฑุ"
   - ุฃุฏุฎู ุจุฑูุฏู ุงูุฅููุชุฑููู
   - ุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

3. **ุชุญูู ูู Supabase Settings:**
   - ุชุฃูุฏ ูู ุฃู Email provider ููุนูู
   - ุชุฃูุฏ ูู ุฃู Redirect URLs ูุถุงู ุจุดูู ุตุญูุญ

---

## ๐ ุงููุฑุงุฌุน
## References

- [Supabase Password Reset](https://supabase.com/docs/reference/javascript/auth-resetpasswordforemail)
- [Supabase Auth Errors](https://supabase.com/docs/reference/javascript/auth-error-codes)
- [Supabase URL Configuration](https://supabase.com/docs/guides/auth/auth-redirects)

