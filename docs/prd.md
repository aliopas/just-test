# منصة باكورة الاستثمارية - وثيقة متطلبات المنتج (PRD)
## Bakurah Investors Portal - Product Requirements Document

**الإصدار:** 1.0  
**التاريخ:** 2024-11-06  
**الحالة:** Draft

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-11-06 | 1.0 | إنشاء PRD الأولي | BMad Team |

---

## Goals and Background Context

### Goals

- توفير منصة استثمارية آمنة ومتكاملة للمستثمرين في باكورة
- تمكين المستثمرين من تقديم وإدارة طلبات الشراء والبيع بسهولة
- توفير لوحة تحكم شاملة للأدمن لإدارة الطلبات والمستخدمين والمحتوى
- ضمان أمان عالي للمعاملات والبيانات الحساسة
- توفير تجربة مستخدم سلسة ومتعددة اللغات (عربي/إنجليزي)
- إدارة دورة حياة الطلبات بشكل واضح ومنظم
- توفير نظام إشعارات شامل (Email, SMS, In-App)
- تمكين إدارة المحتوى (الأخبار والإعلانات) بشكل احترافي

### Background Context

منصة باكورة الاستثمارية هي نظام متكامل مصمم لتسهيل إدارة الاستثمارات بين المستثمرين وشركة باكورة. المنصة توفر واجهة آمنة للمستثمرين لتقديم طلبات الشراء والبيع، مع توفير أدوات إدارية شاملة للأدمن لمراجعة ومعالجة هذه الطلبات.

المنصة مصممة لتكون MVP قابلة للتوسع، مع التركيز على الأمان والامتثال والسهولة في الاستخدام. النظام يدعم دورة حياة كاملة للطلبات من التقديم حتى الإكمال، مع تتبع شامل لكل الإجراءات عبر سجل تدقيق.

---

## Requirements

### Functional Requirements

**FR1:** النظام يجب أن يوفر واجهة عامة (Landing Page) تحتوي على:
- بروفايل تعريفي عن الشركة وعملائها وشركائها
- نموذج العمل التجاري للشركة
- الموارد المالية
- نقاط قوة الشركة
- كيف تكون شريك في باكورة
- القيمة السوقية المعتمدة للشركة
- الأهداف العامة للشركة
- كل قسم في أيقونة خاصة
- خبر/إعلان مختصر وزر تسجيل مستثمر

**FR2:** النظام يجب أن يدعم تسجيل المستثمرين مع تفعيل عبر OTP (SMS/Email) و2FA اختياري.

**FR3:** النظام يجب أن يوفر ملف شخصي للمستثمر يتضمن بيانات الهوية/التواصل، تفضيلات التواصل، ولغة الواجهة (عربي/إنجليزي).

**FR3.1:** النظام يجب أن يوفر اتفاقية عدم إفصاح أو نشر (NDA) إلكترونية عند التسجيل.

**FR3.2:** النظام يجب أن يوفر قسم ملفات الشركة الثابتة للاطلاع فقط (غير قابلة للنشر أو التنزيل) مثل: بروفايل الشركة، نموذج العمل التجاري، اللوائح الإدارية والمالية، الخطة الاستراتيجية والمالية، القوائم المالية السابقة، الشهادات الرسمية للشركة.

**FR3.3:** النظام يجب أن يوفر قسم التقارير المالية (ملفات).

**FR3.4:** النظام يجب أن يوفر قسم المشاريع: مشاريع قائمة ونسبة إنجازها، مشاريع تم إنجازها للعام 2025.

**FR3.5:** النظام يجب أن يوفر قسم أخبار الشركة الحصرية مزود بالصور.

**FR3.6:** النظام يجب أن يوفر تقارير موارد مالية خارج عن الشركة (كل مورد مالي في ملف أيقونة).

**FR4:** النظام يجب أن يسمح للمستثمر بتقديم طلب شراء أو بيع مع الحقول المطلوبة ورفع مرفقات (إيصالات/حوالات).

**FR4.1:** النظام يجب أن يسمح للمستثمر بتقديم طلب شراكة في مشاريع الشركة.

**FR4.2:** النظام يجب أن يسمح للمستثمر بتقديم طلب ترشيح لعضوية المجلس.

**FR4.3:** النظام يجب أن يسمح للمستثمر بتقديم ملاحظات وأفكار للشركة.

**FR5:** النظام يجب أن يوفر متابعة الطلبات بحالات واضحة (Draft, Submitted, Screening, Pending Info, Compliance Review, Approved, Rejected, Settling, Completed).

**FR6:** النظام يجب أن يرسل إشعارات للمستخدمين عبر Email وSMS وداخل المنصة.

**FR7:** النظام يجب أن يوفر لوحة تحكم للأدمن لإدارة الأخبار/الإعلانات (نشر/جدولة/إخفاء).

**FR8:** النظام يجب أن يوفر صندوق وارد للطلبات مع فلترة وفرز حسب الحالة.

**FR9:** النظام يجب أن يسمح للأدمن بقبول/رفض/طلب معلومات إضافية للطلبات مع إضافة تعليقات داخلية.

**FR10:** النظام يجب أن يوفر إدارة المستخدمين (تعليق/تنشيط/إعادة تعيين كلمة مرور).

**FR11:** النظام يجب أن يسجل كل إجراء في سجل تدقيق (Audit Log).

**FR12:** النظام يجب أن يدعم دورة حياة الطلبات (State Machine) مع تسجيل التحولات والوقت والمنفذ والملاحظة.

**FR13:** النظام يجب أن يتحقق من صحة البيانات المدخلة (أرقام موجبة، عملات مدعومة، تواريخ صالحة، ملفات نظيفة).

**FR14:** النظام يجب أن يدعم إدارة المحتوى مع Markdown وصور (تحجيم تلقائي + ضغط).

**FR15:** النظام يجب أن يوفر صلاحيات مختلفة: Investor, Admin.

**FR16:** النظام يجب أن يدعم رفع الملفات إلى Object Storage مع Presigned URLs.

**FR17:** النظام يجب أن يوفر قوالب Email/SMS جاهزة لحالات الطلبات المختلفة.

**FR18:** النظام يجب أن يوفر مركز إشعارات داخل المنصة مع تفضيلات (Mute/Channels).

**FR19:** النظام يجب أن يوفر لوحة متابعة للمستثمر تعرض ملخص المحافظ/الطلبات وحالة كل طلب.

**FR20:** النظام يجب أن يوفر لوحة متابعة للأدمن تعرض إحصائيات الطلبات ومتوسط زمن المعالجة والطلبات المتعثرة.

**FR21:** النظام يجب أن يدعم تصدير CSV مع ترقيم طلبات فريد (INV-YYYY-####).

**FR22:** النظام يجب أن يسمح للأدمن بإنشاء مستثمر جديد يدوياً من لوحة التحكم.

**FR23:** النظام يجب أن يدعم KYC/AML خفيف (تجميعي) مع إمكانية التكامل مع مزود خارجي لاحقاً.

**FR24:** النظام يجب أن يوفر سياسة خصوصية وشروط استخدام وبنود إخلاء مسؤولية مالية.

**FR25:** النظام يجب أن يتتبع موافقة المعالجة (Consent) لكل مستخدم.

**FR26:** النظام يجب أن يدعم حذف/إخفاء بيانات عند الطلب (Right to Erasure).

### Non-Functional Requirements

**NFR1:** النظام يجب أن يستخدم JWT قصير المدى مع Refresh Tokens للجلسات الآمنة.

**NFR2:** النظام يجب أن يدعم CSRF Protection للواجهات.

**NFR3:** النظام يجب أن يوفر Rate Limiting لمنع الإساءة.

**NFR4:** النظام يجب أن يستخدم كلمات مرور مُملّحة (Argon2/Bcrypt).

**NFR5:** النظام يجب أن يوفر RBAC دقيق على مستوى الإجراءات والسجلات.

**NFR6:** النظام يجب أن ينظف البيانات الحساسة في السجلات (لا تسجّل أرقام كاملة أو مفاتيح).

**NFR7:** النظام يجب أن يدعم CSP وXSS/SQLi hardening.

**NFR8:** النظام يجب أن يفحص المرفقات للفيروسات إن أمكن.

**NFR9:** النظام يجب أن يستخدم Object Storage (S3-compatible) مع تشفير at-rest (SSE) وin-transit (TLS).

**NFR10:** النظام يجب أن يدعم سياسة احتفاظ (Retention) للملفات.

**NFR11:** النظام يجب أن يوفر متوسط زمن معالجة الطلب (TAT) ≤ 48 ساعة للطلبات العادية.

**NFR12:** النظام يجب أن يدعم 99.9% uptime.

**NFR13:** النظام يجب أن يدعم معالجة ما لا يقل عن 1000 طلب متزامن.

**NFR14:** النظام يجب أن يدعم ملفات حتى 10MB لكل ملف.

**NFR15:** النظام يجب أن يوفر واجهة برمجية (API) مع pagination وfiltering.

**NFR16:** النظام يجب أن يدعم Docker وCI/CD (GitHub Actions).

**NFR17:** النظام يجب أن يوفر مراقبة (Prometheus/Grafana) وLogging مركزي (ELK/OpenSearch).

**NFR18:** النظام يجب أن يدعم WAF/Cloudflare للحماية.

**NFR19:** النظام يجب أن يدعم أسرار عبر Vault/SSM.

**NFR20:** النظام يجب أن يكون متوافقاً مع WCAG AA للوصولية.

---

## User Interface Design Goals

### Overall UX Vision

المنصة مصممة لتكون بسيطة وواضحة مع التركيز على سهولة الاستخدام. الواجهة يجب أن تكون نظيفة ومهنية تعكس طبيعة المنصة الاستثمارية. يجب أن تكون متجاوبة تعمل على جميع الأجهزة (Desktop, Tablet, Mobile).

### Key Interaction Paradigms

- **واجهة المستثمر:** تصميم بسيط وواضح مع خطوات محددة لتقديم الطلبات. مؤشرات حالة بصرية واضحة لمتابعة الطلبات.
- **لوحة الأدمن:** تصميم شبيه بالبريد الإلكتروني مع Inbox للطلبات. لوحة قرار سريعة لمراجعة البيانات والمرفقات والسجل.

### Core Screens and Views

**للمستثمر:**
- صفحة الهبوط (Landing Page)
- صفحة تسجيل الدخول/التسجيل
- لوحة التحكم الرئيسية (Dashboard)
- صفحة تقديم طلب جديد
- صفحة متابعة الطلبات
- صفحة الملف الشخصي
- صفحة الإشعارات
- صفحة الأخبار

**للأدمن:**
- لوحة التحكم الرئيسية
- صندوق وارد الطلبات
- صفحة تفاصيل الطلب
- صفحة إدارة المستخدمين
- صفحة إدارة المحتوى (الأخبار)
- صفحة التقارير والإحصائيات
- صفحة سجل التدقيق

### Accessibility

**WCAG AA** - المنصة يجب أن تكون متوافقة مع معايير WCAG AA للوصولية.

### Branding

تصميم احترافي يعكس طبيعة المنصة الاستثمارية. استخدام ألوان هادئة ومهنية. دعم اللغة العربية بشكل كامل مع RTL.

#### Visual Identity (Brand Book)

- Logo: `docs/images/logo.jpg` (الشعار الرسمي باعتمادية عالية الدقة)
- Tone: احترافي، تقني، موثوق. تفضيل المساحات البيضاء والواجهات النظيفة.

##### Color Palette

| Role | Color | Hex | RGB |
|------|-------|-----|-----|
| Primary | Bacura Blue | `#2D6FA3` | 45, 111, 163 |
| Primary Dark | Navy Tech | `#1E3A5F` | 30, 58, 95 |
| Text / Ink | Near Black | `#111418` | 17, 20, 24 |
| Border/Muted | Gray 400 | `#9CA3AF` | 156, 163, 175 |
| Surface | Gray 50 | `#F9FAFB` | 249, 250, 251 |
| Accent Success | Emerald | `#10B981` | 16, 185, 129 |
| Accent Warning | Amber | `#F59E0B` | 245, 158, 11 |
| Accent Error | Red | `#EF4444` | 239, 68, 68 |

Notes:
- الأزرق الأساسي مستمد من ألوان الشعار ويُستخدم للعناصر التفاعلية والروابط والأزرار الأساسية.
- يفضل تباين WCAG AA: نسبة تباين النص الأساسي ≥ 4.5:1.

##### Logo Usage

- لا تغيّر نسب الشعار أو ألوانه. لا تضع تأثيرات مثل الظلال الثقيلة أو التوهج.
- المناطق الفارغة حول الشعار ≥ ارتفاع حرف "ب" في النسخة العربية من الشعار.
- الحد الأدنى للحجم على الويب: عرض 96px. في الهواتف: لا يقل عن 72px.
- إصدارات الخلفيات:
  - خلفية فاتحة: استخدم الشعار الملون كما في `docs/images/logo.jpg`.
  - خلفية داكنة: استخدم نسخة مع نص أبيض والأزرق الأساسي، أو ضع خلفية سطح فاتحة تحت الشعار.

##### UI Usage Guidelines

- Primary Button: خلفية `#2D6FA3`، نص أبيض، عند التحويم `#245A84`، عند التعطيل `#9CA3AF`.
- Secondary Button: حدود `#2D6FA3` وخلفية شفافة، نص `#2D6FA3`.
- Links: لون `#2D6FA3` مع underline عند التحويم فقط.
- Headings: لون `#111418`، والأوزان 600–700 للعناوين الرئيسية.
- Cards/Surfaces: خلفية `#F9FAFB` وحدود `#E5E7EB` عند الحاجة.

##### RTL Considerations

- اتجاه الواجهة الافتراضي بالعربية RTL مع محاذاة العناصر التفاعلية وفق اللغة النشطة.
- في العناوين المختلطة (EN + AR)، حافظ على اتجاه كل مقطع حسب لغته.
- أي أيقونات اتجاهية (الأسهم، خطوات المعالجة) يجب أن تعكس الاتجاه RTL تلقائياً.

### Target Device and Platforms

**Web Responsive** - المنصة مصممة لتكون متجاوبة تعمل على جميع الأجهزة (Desktop, Tablet, Mobile).

---

## Technical Assumptions

### Repository Structure

**Monorepo** - المشروع يستخدم Monorepo لإدارة الكود.

### Service Architecture

**Monolith** - البنية الأولية ستكون Monolith مع إمكانية التقسيم لاحقاً إلى Microservices عند الحاجة.

### Testing Requirements

**Unit + Integration** - النظام يستخدم Unit Testing وIntegration Testing. E2E Testing اختياري للمسارات الحرجة.

### Additional Technical Assumptions

- **Frontend:** React.js مع Next.js للـ SSR والأداء
- **Backend:** Node.js مع Express.js
- **Database:** Supabase (PostgreSQL) مع Supabase Client وMCP (Model Context Protocol)
- **Storage:** Supabase Storage (S3-compatible) مع Presigned URLs
- **Auth:** Supabase Auth مع JWT + Refresh + 2FA (TOTP)
- **Real-time:** Supabase Realtime للإشعارات الفورية
- **Queue/Jobs:** Supabase Edge Functions + BullMQ للإشعارات ومعالجة الملفات
- **MCP Integration:** استخدام Supabase MCP Server لإدارة قاعدة البيانات والهجرات
- **i18n:** دعم كامل للعربية والإنجليزية
- **Deployment:** Docker + CI/CD (GitHub Actions) + Supabase CLI
- **Monitoring:** Supabase Dashboard + Prometheus/Grafana
- **Logging:** Supabase Logs + ELK/OpenSearch

---

## Epic List

**Epic 1: البنية الأساسية والمصادقة**  
إنشاء البنية الأساسية للمشروع، إعداد CI/CD، وإنشاء نظام المصادقة الكامل مع OTP و2FA.

**Epic 2: إدارة المستخدمين والملفات الشخصية**  
إنشاء نظام إدارة المستخدمين الكامل مع الملفات الشخصية، الصلاحيات، وإدارة الأدمن للمستخدمين.

**Epic 3: نظام الطلبات (شراء/بيع)**  
إنشاء نظام الطلبات الكامل مع دورة الحياة، رفع الملفات، والتحقق من الصحة.

**Epic 4: لوحة تحكم الأدمن - إدارة الطلبات**  
إنشاء لوحة تحكم شاملة للأدمن لإدارة الطلبات مع الفلترة والفرز والقرارات.

**Epic 5: إدارة المحتوى (الأخبار والإعلانات)**  
إنشاء نظام إدارة المحتوى الكامل مع Markdown، الصور، والجدولة.

**Epic 6: الإشعارات والتواصل**  
إنشاء نظام الإشعارات الشامل مع Email، SMS، وإشعارات داخل المنصة.

**Epic 7: التقارير ولوحات المتابعة**  
إنشاء لوحات المتابعة للمستثمر والأدمن مع التقارير والإحصائيات.

**Epic 9: الصفحة الرئيسية العامة**  
إنشاء صفحة رئيسية شاملة للعامة تحتوي على بروفايل الشركة، نموذج العمل التجاري، الموارد المالية، نقاط القوة، كيفية الشراكة، القيمة السوقية، والأهداف العامة.

**Epic 10: الصفحة الخاصة بالشريك**  
إنشاء صفحة خاصة بكل شريك تحتوي على اتفاقية عدم الإفصاح، ملفات الشركة الثابتة، التقارير المالية، المشاريع، الأخبار الحصرية، وتقارير الموارد المالية الخارجية.

---

## Next Steps

بعد الموافقة على هذا PRD، سيتم إنشاء وثائق Architecture التفصيلية ثم البدء في تطوير Epics وStories.

