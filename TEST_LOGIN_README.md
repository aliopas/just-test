# دليل اختبار تسجيل الدخول

هذا الدليل يشرح كيفية اختبار تسجيل الدخول باستخدام الملفات المتوفرة.

## الملفات المتوفرة

1. **test-login.html** - صفحة HTML تفاعلية لاختبار تسجيل الدخول من المتصفح
2. **test-login.js** - سكريبت Node.js لاختبار تسجيل الدخول من سطر الأوامر
3. **test-login-simple.js** - سكريبت Node.js مبسط لاختبار تسجيل الدخول

## طريقة الاستخدام

### 1. اختبار من المتصفح (الأسهل)

1. افتح ملف `test-login.html` في المتصفح
2. تأكد من أن البيانات الافتراضية موجودة:
   - البريد الإلكتروني: `bacuratec2030@gmail.com`
   - كلمة المرور: `BACURA2030@@440`
3. اضغط على زر "تسجيل الدخول"
4. ستظهر النتيجة في الصفحة

### 2. اختبار من سطر الأوامر (Node.js)

#### استخدام السكريبت البسيط:
```bash
node test-login-simple.js
```

#### استخدام السكريبت الكامل:
```bash
node test-login.js
```

#### تغيير URL السيرفر:
```bash
BACKEND_URL=https://your-backend-url.com node test-login-simple.js
```

## البيانات الافتراضية

- **البريد الإلكتروني:** `bacuratec2030@gmail.com`
- **كلمة المرور:** `BACURA2030@@440`
- **URL السيرفر:** `https://investor-bacura.netlify.app`

## التحسينات المضافة

### في ملف test-login.html:
- ✅ معالجة أفضل للأخطاء
- ✅ عرض معلومات المستخدم بشكل منظم
- ✅ حفظ التوكنات في localStorage
- ✅ رسائل خطأ واضحة ومفصلة
- ✅ دعم CORS بشكل أفضل

### في الباك اند:
- ✅ تحسين إعدادات CORS لدعم جميع المصادر (عند الحاجة)
- ✅ معالجة أفضل للأخطاء في تسجيل الدخول
- ✅ تحسين معالجة user record creation
- ✅ رسائل خطأ أوضح

## استكشاف الأخطاء

### مشكلة CORS
إذا واجهت مشكلة CORS، تأكد من:
1. أن متغير البيئة `CORS_ORIGINS` يحتوي على المصدر الصحيح
2. أو ضع `CORS_ORIGINS=*` للسماح بجميع المصادر (للتطوير فقط)

### مشكلة الاتصال
إذا فشل الاتصال:
1. تأكد من أن السيرفر يعمل
2. تحقق من URL الصحيح
3. تأكد من وجود اتصال بالإنترنت
4. تحقق من إعدادات SSL/HTTPS

### مشكلة المصادقة
إذا فشل تسجيل الدخول:
1. تحقق من صحة البريد الإلكتروني وكلمة المرور
2. تأكد من أن الحساب مفعّل
3. تحقق من سجلات السيرفر للأخطاء

## ملاحظات

- ملفات الاختبار هذه مخصصة للاختبار والتطوير فقط
- لا تستخدمها في بيئة الإنتاج
- تأكد من حماية بيانات الاعتماد في بيئة الإنتاج

